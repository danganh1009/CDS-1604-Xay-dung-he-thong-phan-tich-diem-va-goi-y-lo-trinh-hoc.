{% extends "home.html" %}

{% block content %}
<div class="container">
    <h2 class="mb-4">Bảng điểm</h2>
    {% if student %}
        <h3>Sinh viên: {{ student.name }} ({{ student.student_id }})</h3>
        <p>Điểm trung bình tích lũy: {{ "%.2f"|format(student.gpa) }}</p>
    {% endif %}
    
    {% if course %}
        <h3>Môn học: {{ course.course_name }} ({{ course.course_code }})</h3>
    {% endif %}
    
    <a href="{{ url_for('add_grade') }}" class="btn btn-primary mb-3">Thêm điểm mới</a>
    
    <table class="table table-striped table-entity">
        <thead>
            <tr>
                <th>Sinh viên</th>
                <th>Môn học</th>
                <th>Điểm chuyên cần<br><small>(10%)</small></th>
                <th>Điểm giữa kỳ<br><small>(30%)</small></th>
                <th>Điểm cuối kỳ<br><small>(60%)</small></th>
                <th>Điểm tổng kết</th>
                <th>Học kỳ</th>
                <th>Năm học</th>
                <th>Trạng thái</th>
            </tr>
        </thead>
        <tbody>
            {% for grade in grades %}
            <tr>
                <td>{{ grade.student.name }} ({{ grade.student.student_id }})</td>
                <td>{{ grade.course.course_name }} ({{ grade.course.course_code }})</td>
                <td>{{ "%.1f"|format(grade.attendance_grade) }}</td>
                <td>{{ "%.1f"|format(grade.midterm_grade) if grade.midterm_grade else "Chưa có" }}</td>
                <td>{{ "%.1f"|format(grade.final_grade) if grade.final_grade else "Chưa có" }}</td>
                <td>{{ "%.1f"|format(grade.average_grade) if grade.average_grade else "Chưa có" }}</td>
                <td>{{ grade.semester }}</td>
                <td>{{ grade.year }}</td>
                <td>
                    <span class="badge {% if grade.grade_status == 'Đạt' %}bg-success{% else %}bg-danger{% endif %}">
                        {{ grade.grade_status }}
                    </span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}